<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Reflection & Peer Evaluation Form</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f7f7f7; padding:20px; }
    .container { max-width:900px; margin:0 auto; background:#fff; padding:25px 35px 35px;
                 border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.08); }
    h1 { text-align:center; }
    h2 { margin-top:25px; border-bottom:1px solid #ccc; padding-bottom:4px; }
    label { display:block; font-weight:bold; margin-top:12px; }
    input[type="text"], input[type="date"], textarea {
      width:100%; box-sizing:border-box; padding:6px 8px; margin-top:4px;
    }
    textarea { min-height:70px; resize:vertical; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border:1px solid #ccc; padding:6px; font-size:0.9rem; }
    th { background:#e6e6e6; }
    .small-input { width:70px; }
    .button-row { text-align:center; margin-top:25px; }
    button { padding:10px 18px; border:none; border-radius:4px; cursor:pointer; }
    button[type="submit"] { background:#1976d2; color:#fff; }
    button[type="reset"] { background:#777; color:#fff; margin-left:10px; }
    #status { margin-top:15px; text-align:center; font-weight:bold; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Student Reflection &amp; Peer Evaluation Form</h1>

    <form id="reflectionForm">
      <!-- Basic info -->
      <label>Student Name
        <input type="text" name="studentName" required>
      </label>

      <label>Course / Section
        <input type="text" name="course">
      </label>

      <label>Date
        <input type="date" name="date">
      </label>

      <!-- Part 1 -->
      <h2>Part 1: Self-Reflection</h2>

      <label>1. Which role did you play in your group project?
        <textarea name="role"></textarea>
      </label>

      <label>2. How did you apply the four functions of management
        (Planning, Organizing, Leading, Controlling) in your role?
        <textarea name="functions"></textarea>
      </label>

      <label>3. What was the biggest management concept you learned from this project?
        <textarea name="bigConcept"></textarea>
      </label>

      <!-- Part 2 -->
      <h2>Part 2: Peer Evaluation</h2>
      <p>Rate each teammate on a scale of 1–5 (1 = low, 5 = high).</p>

      <table>
        <thead>
          <tr>
            <th>Teammate Name</th>
            <th>Contribution (1–5)</th>
            <th>Communication (1–5)</th>
            <th>Collaboration (1–5)</th>
            <th>Comments</th>
          </tr>
        </thead>
        <tbody>
          <!-- 5 rows; unused rows can be left blank -->
          <!-- Row template repeated -->
          <tr>
            <td><input type="text" name="teammateName1"></td>
            <td><input type="number" class="small-input" name="contribution1" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="communication1" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="collaboration1" min="1" max="5"></td>
            <td><input type="text" name="comments1"></td>
          </tr>
          <tr>
            <td><input type="text" name="teammateName2"></td>
            <td><input type="number" class="small-input" name="contribution2" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="communication2" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="collaboration2" min="1" max="5"></td>
            <td><input type="text" name="comments2"></td>
          </tr>
          <tr>
            <td><input type="text" name="teammateName3"></td>
            <td><input type="number" class="small-input" name="contribution3" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="communication3" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="collaboration3" min="1" max="5"></td>
            <td><input type="text" name="comments3"></td>
          </tr>
          <tr>
            <td><input type="text" name="teammateName4"></td>
            <td><input type="number" class="small-input" name="contribution4" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="communication4" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="collaboration4" min="1" max="5"></td>
            <td><input type="text" name="comments4"></td>
          </tr>
          <tr>
            <td><input type="text" name="teammateName5"></td>
            <td><input type="number" class="small-input" name="contribution5" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="communication5" min="1" max="5"></td>
            <td><input type="number" class="small-input" name="collaboration5" min="1" max="5"></td>
            <td><input type="text" name="comments5"></td>
          </tr>
        </tbody>
      </table>

      <!-- Part 3 -->
      <h2>Part 3: Overall Project Experience</h2>

      <label>1. What did you enjoy most about this project?
        <textarea name="enjoyMost"></textarea>
      </label>

      <label>2. What challenges did you face, and how did you overcome them?
        <textarea name="challenges"></textarea>
      </label>

      <label>3. How can this project be improved for future classes?
        <textarea name="improvements"></textarea>
      </label>

      <div class="button-row">
        <button type="submit">Submit</button>
        <button type="reset">Clear Form</button>
      </div>

      <div id="status"></div>
    </form>
  </div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzaf72pVifvkdg54U6RFrIGFGh2kBM8jL58BZjH2vxdjTiycuP34EFGu3pAeC2W7beQxA/exec";  // from Apps Script deployment
    //const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyCuMv6n3aPkyM-X7hFLO3JWVRzzLcHYHvftKS7gvB4hT4Ry4UG-9W5YHzH-spOsErQ/exec"
    const form = document.getElementById('reflectionForm');
    const statusDiv = document.getElementById('status');

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      statusDiv.textContent = 'Submitting...';

      const formData = new FormData(form);
      const params = new URLSearchParams();
      for (const [key, value] of formData.entries()) {
        params.append(key, value);
      }

      fetch(SCRIPT_URL, {
        method: 'POST',
        body: params
      })
        .then(response => response.json())
        .then(data => {
          if (data.status === 'ok') {
            statusDiv.textContent = 'Submitted! Summary saved to Drive.';
            form.reset();
          } else {
            statusDiv.textContent = 'There was a problem saving your response.';
          }
        })
        .catch(err => {
          console.error(err);
          statusDiv.textContent = 'Error submitting form.';
        });
    });
  </script>
</body>
</html>
